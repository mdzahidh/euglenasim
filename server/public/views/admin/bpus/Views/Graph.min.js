!function(){"use strict";app=app||{},app.GraphView=Backbone.View.extend({el:"#graph-view",template:_.template($("#tmpl-graph-view").html()),events:{"click .btn-myRefreshData":"myRefreshDataEvent"},disableButtons:function(a){var b=this.$el.find('[name="myRefreshData"]');Object.keys(b).forEach(function(c){null!==b[c].disabled&&void 0!==b[c].disabled&&(b[c].disabled=a)})},updateLabelsWithGraphRefresh:function(a){var b=this,c=b.$el.find('[id="graphTitle"]'),d=-1;Object.keys(c).forEach(function(b){if(d++,c[d]&&c[d].id){var e=c[d],f=null,g=null;Object.keys(e.attributes).forEach(function(a){"name"===e.attributes[a].name?f=e.attributes[a].value:"value"===e.attributes[a].name&&(g=e.attributes[a].value)}),null!==g&&null!==f&&f===a.name&&("0"===g?e.innerHTML=a.labels[0].str:"1"===g?e.innerHTML=a.labels[1].str:"2"===g?e.innerHTML=a.labels[2].str:"3"===g&&(e.innerHTML=a.labels[3].str))}})},myRefreshDataEvent:function(a){var b={bpuName:app.mainView.socketOptions.bpuName,scriptType:a.target.value,filter:{count:1,type:"all"}};this.refreshData(b)},refreshData:function(a,b){for(var c=this,d=this.$el.find('[type="radio"]'),e=-1,f=0;f<Object.keys(d).length;f++){e++;var g=d[e];if(g&&g.name===a.scriptType&&g.checked){a.filter.type=g.id.toLowerCase();break}}app.socketClient.refreshGraphData(a,function(a,d){var e=null;if(a)e="admin/bpus/"+app.mainView.socketOptions.bpuName+" app.socketClient.refreshGraph:"+a,console.log(e),b&&b(e,null);else if(d.err)e="admin/bpus/"+app.mainView.socketOptions.bpuName+" app.socketClient.refreshGraphData.err:"+d.err,console.log(e),b&&b(e,null);else{c.updateLabelsWithGraphRefresh(d.graphUpdate);var f=app.graphView.$el.find('[name="'+d.scriptType+'"]');Object.keys(f).forEach(function(a){"img"===f[a].localName&&(f[a].src=d.graphUpdate.src+"?"+(new Date).getTime())})}b&&b(null,null)})},initialize:function(){this.model=new app.Note,this.listenTo(this.model,"change",this.render),this.render()},render:function(){this.$el.html(this.template(this.model.attributes))}})}();
//# sourceMappingURL=Graph.min.js.map