!function(){"use strict";app=app||{},app.myMediaImagePath="/media/ModelImageSets",app.Account=Backbone.Model.extend({idAttribute:"_id",url:"/account/threejs/"}),app.User=Backbone.Model.extend({idAttribute:"_id",url:"/account/threejs/"}),app.SetPath=Backbone.Model.extend({idAttribute:"_id",url:"/account/threejs/"}),app.ImageSet=Backbone.Model.extend({idAttribute:"_id",url:"/account/threejs/"}),app.ModelParameters=Backbone.Model.extend({idAttribute:"_id",url:"/account/threejs/update/",parse:function(a){return a&&(a.modelParameters&&(app.mainView.modelParameters.set(a.modelParameters),delete a.modelParameters),app.editorView&&app.editorView.syncUp()),a}}),$(document).ready(function(){app.mainView=new app.MainView}),app.MainView=Backbone.View.extend({el:".page .container",lastCase:0,serverTab:"threejs",updateCaseInfo:function(a,b){if(a=1,a!==this.lastCase){this.lastCase=a;var c="Euglena Model ",d="url('/media/Euglena_Model_1.png')";1==a?(c+="1: Angle differentiator",d="url('/media/Euglena_Model_1.png')"):2==a?(c+="2: Two light detectors",d="url('/media/Euglena_Model_2.png')"):3==a&&(c+="3: The rotating single eye",d="url('/media/Euglena_Model_3.png')"),document.getElementById("MainHeader").innerHTML=c,document.getElementById("caseimage").style.backgroundColor=b,document.getElementById("divJoystick").style.backgroundColor=b,document.getElementById("caseimage").style.backgroundImage=d}},updateFromEditorCallback:function(a,b,c,d,e,f){this.updateCaseInfo(Number(a.attributes.modelCase),b),app.trackingView&&(f||app.trackingView.setEuglenaParameters(a,b),d?(app.trackingView.resetData(),app.trackingView.startPlay=!0):e?app.trackingView.doStopPlay=!1:c&&(app.trackingView.resetData(),app.trackingView.doStopPlay=!0))},updateFromViewCallback:function(a){app.editorView&&app.editorView.videoEnded(a)},initialize:function(){app.mainView=this,this.account=new app.Account(JSON.parse(unescape($("#data-account").html()))),this.user=new app.User(JSON.parse(unescape($("#data-user").html()))),this.imageset=new app.ImageSet(JSON.parse(unescape($("#data-imageset").html()))),this.setpath=new app.SetPath(JSON.parse(unescape($("#data-setpath").html()))),this.modelParameters=new app.ModelParameters(JSON.parse(unescape($("#data-modelParameters").html()))),null!==this.modelParameters.get("surgeName")[0]&&void 0!==this.modelParameters.get("surgeName")[0]||this.modelParameters.get("surgeName").push("Name?"),null!==this.modelParameters.get("couplingName")[0]&&void 0!==this.modelParameters.get("couplingName")[0]||this.modelParameters.get("couplingName").push("Name?"),null!==this.modelParameters.get("rollName")[0]&&void 0!==this.modelParameters.get("rollName")[0]||this.modelParameters.get("rollName").push("Name?"),console.log("index.js initialize",this.modelParameters.id,this.modelParameters.attributes),console.log("index.js initialize",this.modelParameters.id),console.log("surge",this.modelParameters.get("surgeName")[0],this.modelParameters.get("surge")[0]),console.log("coupling",this.modelParameters.get("couplingName")[0],this.modelParameters.get("coupling")),console.log("roll",this.modelParameters.get("rollName")[0],this.modelParameters.get("roll")[0]);var a="#e0efff";document.body.style.background=a,app.editorView=new MyTrackingEditor(app),app.trackingView=new MyTrackingView(app,document.getElementById("trackingview"),function(){app.trackingView.addMouseMoveEvent(),app.trackingView.toggleClickEvent(!0),window.addEventListener("resize",function(a){app.mainView.isClientActive=!0,app.mainView.lastClientActivityTime=(new Date).getTime(),app.mainView.lastSaveTime=(new Date).getTime();var b=a.target;({name:"client:"+app.mainView.serverTab+":resize",time:(new Date).getTime(),innerHeight:b.innerHeight,outerHeight:b.outerHeight,innerWidth:b.innerWidth,outerWidth:b.outerWidth,pageXOffset:b.pageXOffset,pageYOffset:b.pageYOffset,scrollMaxX:b.scrollMaxX,scrollMaxY:b.scrollMaxY,scrollX:b.scrollX,scrollY:b.scrollY,devicePixelRatio:b.devicePixelRatio,screenX:b.screenX,screenY:b.screenY,theWindow:{innerHeight:window.innerHeight,innerWidth:window.innerWidth,outerHeight:window.outerHeight,outerWidth:window.outerWidth,devicePixelRatio:window.devicePixelRatio,screenX:window.screenX,screenY:window.screenY}})}),window.addEventListener("wheel",function(a){app.mainView.isClientActive=!0,app.mainView.lastClientActivityTime=(new Date).getTime(),app.mainView.lastSaveTime=(new Date).getTime();({name:"client:"+app.mainView.serverTab+":document:wheel",time:(new Date).getTime(),layerX:a.layerX,layerY:a.layerY,clientX:a.clientX,clientY:a.clientY,pageX:a.pageX,pageY:a.pageY,screenX:a.screenX,screenY:a.screenY,ctrlKey:a.ctrlKey,shiftKey:a.shiftKey,deltaMode:a.deltaMode,deltaX:a.deltaX,deltaY:a.deltaY,deltaZ:a.deltaZ})}),document.addEventListener("mousemove",function(a){app.mainView.isClientActive=!0,app.mainView.lastClientActivityTime=(new Date).getTime(),app.mainView.lastSaveTime=(new Date).getTime();({name:"client:"+app.mainView.serverTab+":document:mousemove",time:(new Date).getTime(),layerX:a.layerX,layerY:a.layerY,clientX:a.clientX,clientY:a.clientY,type:"notset"})},!0),document.addEventListener("mouseup",function(a){app.mainView.isClientActive=!0,app.mainView.lastClientActivityTime=(new Date).getTime();({name:"client:"+app.mainView.serverTab+":document:mouseup",time:(new Date).getTime(),layerX:a.layerX,layerY:a.layerY,clientX:a.clientX,clientY:a.clientY,type:"notset"})},!0);document.addEventListener("mouseout",function(a){app.mainView.isClientActive=!0,app.mainView.lastClientActivityTime=(new Date).getTime(),app.mainView.lastSaveTime=(new Date).getTime();({name:"client:"+app.mainView.serverTab+":document:mouseout",time:(new Date).getTime(),layerX:a.layerX,layerY:a.layerY,clientX:a.clientX,clientY:a.clientY,type:"notset"})},!0),document.addEventListener("mousedown",function(a){app.mainView.isClientActive=!0,app.mainView.lastClientActivityTime=(new Date).getTime(),app.mainView.lastSaveTime=(new Date).getTime();({name:"client:"+app.mainView.serverTab+":document:mousedown",time:(new Date).getTime(),layerX:a.layerX,layerY:a.layerY,clientX:a.clientX,clientY:a.clientY,type:"notset"})},!0),window.dispatchEvent(new Event("resize")),app.mainView.goUpdate()})},goUpdate:function(){var a=(new Date).getTime(),b=(new Date).getTime(),c=0,d=function(){b=(new Date).getTime(),c=b-a,a=b,app.trackingView.animate(c),requestAnimationFrame(d)};d()}})}();
//# sourceMappingURL=index.min.js.map