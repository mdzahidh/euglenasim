MyTrackingEditor=function(a){return a.EditorView=Backbone.View.extend({el:"#trackingeditor",template:_.template($("#tmpl-trackingeditor").html()),events:{"click .btn-editParameter":"editParametersClick","click .btn-resetParameter":"resetParametersClick"},updateView:!0,doRun:!1,didResetParametersClick:!1,didEditParametersClickOn:!1,didEditParametersClickOff:!1,didVideoJustEnded:!1,resetParametersClick:function(){a.mainView.isClientActive=!0,a.mainView.lastClientActivityTime=(new Date).getTime(),a.mainView.lastSaveTime=(new Date).getTime();({name:"EditorView:"+a.mainView.serverTab+":resetParametersClick",time:(new Date).getTime(),didResetParametersClick:this.didResetParametersClick,didEditParametersClickOn:this.didEditParametersClickOn,didEditParametersClickOff:this.didEditParametersClickOff,didVideoJustEnded:this.didVideoJustEnded});this.didEditParametersClickOn=!1,this.didEditParametersClickOff=!1,this.didResetParametersClick=!0,this.didVideoJustEnded=!1,this.render()},editParametersClick:function(){a.mainView.isClientActive=!0,a.mainView.lastClientActivityTime=(new Date).getTime(),a.mainView.lastSaveTime=(new Date).getTime();({name:"EditorView:"+a.mainView.serverTab+":editParametersClick",time:(new Date).getTime(),didResetParametersClick:this.didResetParametersClick,didEditParametersClickOn:this.didEditParametersClickOn,didEditParametersClickOff:this.didEditParametersClickOff,didVideoJustEnded:this.didVideoJustEnded});this.didVideoJustEnded=!1,this.disableEditor(!0),this.didEditParametersClickOn?(this.didEditParametersClickOn=!1,this.didEditParametersClickOff=!0):(this.didEditParametersClickOn=!0,this.didEditParametersClickOff=!1),this.saveParameters()},videoEnded:function(b){a.mainView.isClientActive=!0,a.mainView.lastClientActivityTime=(new Date).getTime(),a.mainView.lastSaveTime=(new Date).getTime(),this.model.attributes.std=b.standardDev,this.didEditParametersClickOn=!1,this.didEditParametersClickOff=!1,this.saveParameters()},saveParameters:function(){var a=this,b={_id:a.model.id};Object.keys(a.model.attributes).forEach(function(c){var d=a.$el.find('[name="'+c+'"]')[0];d&&("std"===c||"coupling"===c||"x"===c||"y"===c||"length"===c||"diameter"===c||"modelCase"===c?b[c]=d.value:b[c]=[d.value])}),console.log("MyTrackingEditor.js saveParameters",b._id,b),console.log("MyTrackingEditor.js saveParameters",b._id),console.log("surge",b.surgeName[0],b.surge[0]),console.log("coupling",b.couplingName[0],b.coupling),console.log("roll",b.rollName[0],b.roll[0]),console.log("saveParameters",Object.keys(b)),a.model.save(b)},disableEditor:function(a){var b=this;Object.keys(b.model.attributes).forEach(function(c){var d=b.$el.find('[name="'+c+'"]')[0];d&&(d.disabled=a);var e=$("#"+c+"Slider")[0];e=null,e&&(a?$("#"+c+"Slider").slider("disable"):$("#"+c+"Slider").slider("enable"))});var c=b.$el.find('[name="btnEditParameter"]')[0];c&&(c.disabled=a)},toggleSliderForModelCase:function(a){var b=this;toggle=!0,3===a&&(toggle=!1);var c="roll",d=b.$el.find('[name="'+c+'"]')[0];d&&(d.disabled=toggle);var d=b.$el.find('[name="'+c+'Name"]')[0];d&&(d.disabled=toggle);var e=$("#"+c+"Slider")[0];e=null,e&&(toggle?$("#"+c+"Slider").slider("disable"):$("#"+c+"Slider").slider("enable"))},initialize:function(){this.model=new a.ModelParameters,this.syncUp(),this.listenTo(a.mainView.modelParameters,"change",this.syncUp),this.listenTo(this.model,"sync",this.render),this.render()},syncUp:function(){this.model.set(a.mainView.modelParameters.attributes)},render:function(){function b(b,e){var f={};if(null!=e){f.newValue=e;var g=d.$el.find('[name="'+b.target.myId+'"]')[0];g&&(g.value=e)}if(d.model.attributes[b.target.myId]=f.newValue,"modelCase"===f.name){var h="#00ff00",i=Number(d.model.attributes.modelCase);1===i?h="#5bc0de":2===i?h="#5cb85c":3===i&&(h="#f4877d"),d.el.style.backgroundColor=h}var j=$("#"+b.target.myId+"Slider")[0];j=null;var k=d.$el.find('[name="'+b.target.myId+'Label"]')[0];if(j&&k){$("#"+c+"Slider").slider.value=Number(f.newValue);k.textContent.split(":")[0]}f.oldValue+""!=f.newValue+""&&a.mainView.updateFromEditorCallback(d.model,d.el.style.backgroundColor,d.didResetParametersClick,d.didEditParametersClickOn,d.didEditParametersClickOff,d.didVideoJustEnded)}this.$el.html(this.template(this.model.attributes));var c=null,d=this;Object.keys(d.model.attributes).forEach(function(a){var c=d.$el.find('[name="'+a+'"]')[0];if(c){var e=d.model.attributes[a];"object"==typeof d.model.attributes[a]&&d.model.attributes[a].length>0&&(e=d.model.attributes[a][0]),c.myId=a,c.value=e,c.onchange=b,c.focusout=function(){console.log(c);var a=Math.floor(Math.min(Number(c.value),Number(c.max)));a=Math.floor(Math.max(Number(c.min),a)),""+a!==c.value&&window.alert("Invalid "+c.name+": Only integer values between "+Number(c.min)+" and "+Number(c.max)+"."),c.value=a};var f=$("#"+a+"Slider")[0],g=d.$el.find('[name="'+a+'Label"]')[0];if(f=null,f&&g){$("#"+a+"Slider").slider({value:e,min:Number(c.min),max:Number(c.max),step:Number(c.step),slide:function(c,d){b({target:{myId:a}},d.value)},stop:function(c,d){b({target:{myId:a}},d.value)},start:function(a,b){}});g.textContent.split(":")[0]}}}),d.didEditParametersClickOn?d.disableEditor(!0):d.disableEditor(!1);var e=d.model.attributes.modelCase,f="#00ff00";1==e?f="#5bc0de":2==e?f="#5cb85c":3==e&&(f="#f4877d"),d.el.style.backgroundColor=f,a.mainView.updateFromEditorCallback(d.model,d.el.style.backgroundColor,d.didResetParametersClick,d.didEditParametersClickOn,d.didEditParametersClickOff,d.didVideoJustEnded)}}),new a.EditorView},MyTrackingEditor.prototype=Object.create(Object.prototype);
//# sourceMappingURL=MyTrackingEditor.min.js.map