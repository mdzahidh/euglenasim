{"version":3,"sources":["MicroscopeView.js"],"names":["MicroscopeView","properties","THREE","Mesh","call","this","loadedImages","NormalColors","HighlightColors","PathColors","c","length","push","normal","highlight","name","width","size","height","hoverProperties","index","type","color","highlightColor","doHighlight","point","x","y","z","mouseHover","MyPoint","mouseHoverSize","toggleVisible","add","material","MeshBasicMaterial","background","opacity","transparent","geometry","PlaneGeometry","position","Vector3","hasLights","light","undefined","hasLight","lightSize","lightProps","isTransparent","initOpacity","initColor","parentSize","offsets","lights","MyQuadLightsMesh","debugOn","allOn","hasGridLines","gridLines","grid","hasGrid","boxSize","Geometry","startX","startY","xLimit","i","vertices","yLimit","LineBasicMaterial","Line","LinePieces","visible","isVisible","rotation","Math","PI","playImageLightData","playImageFrame","playImageTime","playtime","resetData","lightValues","led1","led2","led3","led4","newPath","staticPath","imageCounter","prototype","Object","create","hasImage","imageLightData","currentImage","currentImageFrame","currentImageTime","playData","image","activeImage","frameNumber","frameTime","images","sort","a","b","timestamp","forEach","obj","isImage","lightData","item","concat","tempLightData","j","img","lastData","diff","setLightData","slice","updateForPlaying","dt","stopPlay","didChangeImage","playEvent","shift","loadNewImage","path","setHighlightPoint","sec","Number","document","getElementById","value","isStillPlaying","top","right","bottom","left","setOpacity","updateForImageChange","imageFrameNumber","self","from","me","backgroundImage","remove","l_imageLoaded","dat","map","texture","Mesh_Image","l_imageLoadedErr","err","console","log","ImageUtils","loadTexture","UVMapping","minFilter","magFilter","LinearFilter","createNewStaticPath","props","MyPath","toggleHighlight","points","pt","addPointToStaticPath","checkPoint","splice","newPoint","addPoint","createNewSetPath","removePointFromPath","addPointToPath","clearNewPath","getNewPathPoints","retPoints","clearMousePoint","setMousePoint","mousePosition","setPosition"],"mappings":"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","file":"MicroscopeView.min.js"}