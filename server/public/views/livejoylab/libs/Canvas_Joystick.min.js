var Canvas_Joystick=function(a){var b=this;b.snapBack=!0,b.className="canvas-joystick",b.canvasDiv=a;var c=1;b.canvas=document.createElement("canvas"),b.canvas.id="JoystickCanvas",b.canvas.width=a.clientWidth*c,b.canvas.height=a.clientHeight*c,b.canvas.className=b.className+"-off",b.canvas.style.left=a.clientWidth*(.5*(1-c))+"px",b.canvas.style.top=a.clientHeight*(.5*(1-c))+"px",b.canvas.style.position="relative",a.appendChild(b.canvas);var d=b.canvas.getContext("2d");d.strokeStyle="#ff00ff",d.lineWidth=2,b.org={},b.org.textIntensity={x:5,y:44,size:"20"},b.org.textAngle={x:5,y:20,size:"20"},b.RADS_TO_DEGREES=180/Math.PI,b.TWO_PI=2*Math.PI,b.segs=48,b.arcLength=b.TWO_PI/b.segs,b.textIntensity=JSON.parse(JSON.stringify(b.org.textIntensity)),b.textAngle=JSON.parse(JSON.stringify(b.org.textAngle)),b.centerPoint={x:.5*b.canvas.width,y:.55*b.canvas.height},b.maxJoyRadius=.3*b.canvas.width,b.joyHeadRadius=.2*b.maxJoyRadius,b.dx_evt=0,b.dy_evt=0,b.mag_evt=0,b.inten_evt=0,b.degs_evt=0,b.rads_evt=0,b.sin_evt=0,b.cos_evt=0,b.x_evt=b.centerPoint.x,b.y_evt=b.centerPoint.y,this.updateDraw=function(){d.clearRect(0,0,b.canvas.width,b.canvas.height),i(),j(),e(b.inten_evt),h(),f(b.x_evt,b.y_evt),g(b.x_evt,b.y_evt),k(b.inten_evt),l(b.degs_evt)};var e=function(a){d.beginPath(),d.fillStyle="rgba(255, 255, 0, "+a+")",d.arc(b.centerPoint.x,b.centerPoint.y,.95*b.maxJoyRadius,0,b.TWO_PI,!0),d.fill()},f=function(a,c){d.beginPath(),d.strokeStyle="rgba(255, 255, 255, 0.666)",d.lineWidth=2,d.moveTo(b.centerPoint.x,b.centerPoint.y),d.lineTo(a,c),d.stroke()},g=function(a,c){d.beginPath(),d.fillStyle="rgba(53, 103, 191, 1)",d.arc(a,c,b.joyHeadRadius,0,b.TWO_PI,!0),d.fill()},h=function(){d.beginPath(),d.strokeStyle="rgba(255, 255, 255, 1)",d.lineWidth=2,d.moveTo(b.centerPoint.x,b.centerPoint.y-4),d.lineTo(b.centerPoint.x,b.centerPoint.y+4),d.moveTo(b.centerPoint.x-4,b.centerPoint.y),d.lineTo(b.centerPoint.x+4,b.centerPoint.y),d.stroke()},i=function(){for(var a=0;a<b.segs;a+=2)d.beginPath(),d.strokeStyle="rgba(255, 255, 255, 0.5)",d.lineWidth=2,d.arc(b.centerPoint.x,b.centerPoint.y,b.maxJoyRadius,a*b.arcLength+b.arcLength,a*b.arcLength,!0),d.stroke()},j=function(){for(var a=.5*b.arcLength,c=0;c<2*b.segs;c+=2)d.beginPath(),d.strokeStyle="rgba(255, 255, 255, 0.5)",d.lineWidth=2,d.arc(b.centerPoint.x,b.centerPoint.y,.5*b.maxJoyRadius,c*a+a,c*a,!0),d.stroke()},k=function(a){d.beginPath(),d.fillStyle="rgba(255, 255, 255, 1)",d.font=b.textIntensity.size+"px Veranda";var c=Math.round(100*a)/100+"";1===c.length?c+=".00":3===c.length&&(c+="0"),d.fillText("Intensity: "+c,b.textIntensity.x,b.textIntensity.y)},l=function(a){d.beginPath(),d.fillStyle="rgba(255, 255, 255, 1)",d.font=b.textAngle.size+"px Veranda";var c=Number(a);c=0>=c?Math.abs(c):360-c;var e=Math.round(100*c)/100+"";1===e.length?e="  "+e:2===e.length&&(e=" "+e),d.fillText("Angle: "+e+" degs",b.textAngle.x,b.textAngle.y)};return this};Canvas_Joystick.prototype=Object.create(Object.prototype),Canvas_Joystick.prototype.reset=function(a){this.setPositionFromLightValues(lightValues)},Canvas_Joystick.prototype.resize=function(a,b){this.canvas.width=a,this.canvas.height=b,this.maxJoyRadius=.3*this.canvas.width,this.canvas.height<this.canvas.width&&(this.maxJoyRadius=.3*this.canvas.height),this.joyHeadRadius=.2*this.maxJoyRadius,this.centerPoint={x:.5*this.canvas.width,y:.55*this.canvas.height},this.canvas.width<200?(this.textAngle.size="12",this.textAngle.x=0,this.textAngle.y=44,this.textIntensity.size="12",this.textIntensity.x=0,this.textIntensity.y=20):(this.textIntensity.size=this.org.textIntensity.size,this.textIntensity.x=this.org.textIntensity.x,this.textIntensity.y=this.org.textIntensity.y,this.textAngle.size=this.org.textAngle.size,this.textAngle.x=this.org.textAngle.x,this.textAngle.y=this.org.textAngle.y)},Canvas_Joystick.prototype.toggleJoystick=function(a){this.canvas.className!==this.className+"-"+a&&(this.canvas.className=this.className+"-"+a)},Canvas_Joystick.prototype.update=function(a){this.updateDraw(a)},Canvas_Joystick.prototype.getXyFromLightValues=function(a,b){var c=this.centerPoint.x;a.leftValue>0?c-=this.maxJoyRadius*(a.leftValue/100):a.rightValue>0&&(c+=this.maxJoyRadius*(a.rightValue/100));var d=this.centerPoint.y;return a.topValue>0?d-=this.maxJoyRadius*(a.topValue/100):a.bottomValue>0&&(d+=this.maxJoyRadius*(a.bottomValue/100)),{x:Math.round(c),y:Math.round(d)}},Canvas_Joystick.prototype.setLightValuesFromXY=function(a,b){return this.dx_evt=a.metaData.layerX-this.centerPoint.x,this.dy_evt=a.metaData.layerY-this.centerPoint.y,this.mag_evt=Math.sqrt(this.dx_evt*this.dx_evt+this.dy_evt*this.dy_evt),this.rads_evt=Math.atan2(this.dy_evt,this.dx_evt),0===this.mag_evt?(this.sin_evt=0,this.cos_evt=0):(this.sin_evt=this.dy_evt/this.mag_evt,this.cos_evt=this.dx_evt/this.mag_evt),this.mag_evt>this.maxJoyRadius&&(this.dx_evt=this.maxJoyRadius*this.cos_evt,this.dy_evt=this.maxJoyRadius*this.sin_evt,this.mag_evt=this.maxJoyRadius),this.x_evt=this.centerPoint.x+this.dx_evt,this.y_evt=this.centerPoint.y+this.dy_evt,this.degs_evt=(this.rads_evt*this.RADS_TO_DEGREES).toFixed(0),this.inten_evt=(this.mag_evt/this.maxJoyRadius).toFixed(2),this.sin_evt<=0?(a.topValue=Math.round(100*Math.abs(this.sin_evt*this.inten_evt)),a.bottomValue=0):(a.topValue=0,a.bottomValue=Math.round(100*Math.abs(this.sin_evt*this.inten_evt))),this.cos_evt<=0?(a.leftValue=Math.round(100*Math.abs(this.cos_evt*this.inten_evt)),a.rightValue=0):(a.leftValue=0,a.rightValue=Math.round(100*Math.abs(this.cos_evt*this.inten_evt))),a.metaData.intensity=this.inten_evt,a.metaData.degs=this.degs_evt,a.metaData.rads=this.rads_evt,a.metaData.x=this.x_evt,a.metaData.y=this.y_evt,a};
//# sourceMappingURL=Canvas_Joystick.min.js.map